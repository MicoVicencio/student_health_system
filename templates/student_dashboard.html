<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Dashboard</title>

<!-- Bootstrap & Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
/* Background and theme */
body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    margin: 0;
    padding: 0;
    min-height: 100vh;
}

/* Main container */
.dashboard-container {
    max-width: 1100px;
    margin: 30px auto;
    padding: 30px;
    border-radius: 20px;
    background: #f7f9fc;
    box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    transition: all 0.3s ease-in-out;
}

/* Header with school logo */
.school-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-bottom: 40px;
}

.school-header img {
    height: 60px;
    width: 60px;
    object-fit: contain;
}

.school-header h1 {
    font-size: 28px;
    color: #2575fc;
    font-weight: 700;
}

/* Dashboard Header */
.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.dashboard-header h2 {
    color: #6a11cb;
    font-weight: 700;
}

.logout-btn {
    transition: 0.3s;
}
.logout-btn:hover {
    transform: scale(1.1);
}

/* Student Info Cards */
.info-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.card {
    border: none;
    border-radius: 15px;
    padding: 20px;
    background: #fff;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    transition: transform 0.3s, box-shadow 0.3s;
    display: flex;
    align-items: center;
    gap: 15px;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}

.card h5 {
    color: #6a11cb;
    font-weight: 600;
    margin-bottom: 5px;
}

.card p {
    margin: 0;
    color: #555;
}

.card i {
    font-size: 28px;
    color: #2575fc;
}

/* Visits Section */
.visits-section {
    margin-top: 50px;
    padding: 20px;
    border-radius: 15px;
    background: #fff;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.visits-section h4 {
    color: #2575fc;
    margin-bottom: 20px;
}

/* Visit items */
.list-group-item {
    border-radius: 10px;
    margin-bottom: 10px;
    transition: all 0.3s;
}

.list-group-item:hover {
    background: #e4edff;
    transform: translateX(5px);
    cursor: pointer;
}

/* Modal customization */
.modal-header {
    background: #2575fc;
    color: #fff;
    border-top-left-radius: 15px;
    border-top-right-radius: 15px;
}

.modal-content {
    border-radius: 15px;
}

/* Smooth transitions */
* {
    transition: all 0.3s ease;
}
</style>
</head>
<body>

<div class="dashboard-container">
    <!-- School Header -->
    <div class="school-header">
        <h1>University of Perpetual Help System Laguna Clinic</h1>
    </div>

    <!-- Dashboard Header -->
    <div class="dashboard-header">
        <h2>Student Dashboard</h2>
        <a href="{{ url_for('logout') }}" class="btn btn-outline-danger logout-btn">Logout</a>
    </div>

    <!-- Student Info Cards -->
    <div class="info-cards">
        <div class="card"><i class="bi bi-person-badge"></i>
            <div>
                <h5>Student ID</h5><p>{{ student.student_number }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-person-circle"></i>
            <div>
                <h5>Full Name</h5><p>{{ student.full_name }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-house"></i>
            <div>
                <h5>Address</h5><p>{{ student.address }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-calendar3"></i>
            <div>
                <h5>Age</h5><p>{{ student.age }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-book"></i>
            <div>
                <h5>Grade & Section</h5><p>{{ student.grade }} - {{ student.section }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-heart-pulse"></i>
            <div>
                <h5>Allergies</h5><p>{{ student.allergies }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-heart"></i>
            <div>
                <h5>Medical Condition</h5><p>{{ student.medical_condition }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-person-lines-fill"></i>
            <div>
                <h5>Parent Name</h5><p>{{ student.parent_name }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-telephone"></i>
            <div>
                <h5>Parent Contact Number</h5><p>{{ student.parent_contact_number }}</p>
            </div>
        </div>
        <div class="card"><i class="bi bi-envelope"></i>
            <div>
                <h5>Parent Email</h5><p>{{ student.parent_email }}</p>
            </div>
        </div>
    </div>

    <!-- Visits Section -->
    <div class="visits-section">
        <h4>Recent Clinic Visits</h4>
        {% if visits %}
        <div class="list-group">
            {% for visit in visits %}
            <div class="list-group-item" data-bs-toggle="modal" data-bs-target="#visitModal{{ visit.id }}">
                {{ visit.time_in }} - {{ visit.complaint[:50] }}...
            </div>

            <!-- Visit Modal -->
            <div class="modal fade" id="visitModal{{ visit.id }}" tabindex="-1" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">Visit Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                  </div>
                  <div class="modal-body">
                    <p><strong>Time In:</strong> {{ visit.time_in }}</p>
                    <p><strong>Temperature:</strong> {{ visit.temperature }} Â°C</p>
                    <p><strong>Complaint:</strong> {{ visit.complaint }}</p>
                    <p><strong>Diagnosis:</strong> {{ visit.diagnosis }}</p>
                    <p><strong>Medicine:</strong> {{ visit.medicine }}</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>

            {% endfor %}
        </div>
        {% else %}
            <p>No recent visits.</p>
        {% endif %}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>